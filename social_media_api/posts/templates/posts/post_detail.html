{% load static %}
{% load post_extras %}
{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.content }}</p>
<p>By {{ post.author.username }} on {{ post.created_at }}</p>

<p>Likes: {{ post.likes.count }}</p>

<form method="post" action="{% url 'posts:like_post' post.id %}">
    {% csrf_token %}
    <button type="submit">
        {% if post|liked_by:user %}
            Unlike
        {% else %}
            Like
        {% endif %}
    </button>
</form>

<h3>Comments</h3>
{% include 'posts/_comment_form.html' %}

{% for comment in post.comments.all %}
    <div class="comment">
        <p>{{ comment.author.username }}: {{ comment.content }}</p>
        <small>{{ comment.created_at }}</small>
    </div>
{% empty %}
    <p>No comments yet.</p>
{% endfor %}

{% endblock %}
